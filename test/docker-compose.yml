web:
  image: qdjl/nginx
  ports:
    - '80:80'
    - '8080:8080'
  restart: always
  links:
    - php
  volumes:
    - './etc/nginx:/app/etc/nginx'
    - './phpMyAdmin:/app/phpMyAdmin'
    - './wwwroot:/app/wwwroot'


php:
  image: qdjl/php7
  restart: always
  expose:
    - '9000'
  volumes:
    - '/etc/localtime:/etc/localtime:ro'
    - './phpMyAdmin:/app/phpMyAdmin'
    - './wwwroot:/app/wwwroot'
  links:
    - memcached
    - redis
    - mysql

redis:
  image: redis
  expose:
    - '6397'
  restart: always
  volumes:
    - '/etc/localtime:/etc/localtime:ro'
    
memcached:
  image: memcached
  restart: always
  expose:
    - '11211'
  command: '-m 128'


mysql:
  image: mysql
  environment:
    MYSQL_ROOT_PASSWORD: root
  expose:
    - '3306'
  restart: always
  volumes:
    - '/etc/localtime:/etc/localtime:ro'
    - './database:/var/lib/mysql'
    - './etc/mysql/conf.d:/etc/mysql/conf.d'



